<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Sorting algorithms</title>
    <link href="styles/js-console.css" rel="stylesheet" />
    <link href="styles/main-page.css" rel="stylesheet" />
    <style type="text/css">
        #input #array {
            width: 740px;
        }

        #js-console #result {
            margin: 0;
            padding: 0;
            display: inline-block;
            border-collapse: collapse;
            border: 1px solid white;
        }

            #js-console #result td {
                border: 1px solid white;
                padding: 0 5px 0 5px;
            }
    </style>
</head>
<body>
    <!-- Task -->
    <div id="task">
        <p>
            Sorting an array means to arrange its elements in increasing order. Write a script to sort an array.
        </p>
    </div>
    <!-- Input -->
    <div id="input">
        <label for="array">Array: </label>
        <input type="text" id="array" value="6 4 2 5 3 1" placeholder="Enter the numbers separated with whitespace" />
        <br />
        <a href="#" onclick="onSelectionSortBtnClick()">Selection sort</a>
        <a href="#" onclick="onInsertionSortBtnClick()">Insertion sort</a>
        <a href="#" onclick="onBubbleSortBtnClick()">Bubble sort</a>
    </div>
    <!-- jsConsole -->
    <div id="js-console"></div>
    <script src="scripts/js-console.js"></script>
    <!-- Solution -->
    <script>
        // Selection sort
        function onSelectionSortBtnClick() {
            var array = jsConsole.readNumbersArray("#array", " ");
            // TODO: check if array is empty

            var length = array.length;
            for (var i = 0; i < length - 1; i++) {
                var min = i;
                for (var j = i + 1; j < length; j++) {
                    if (array[min] > array[j]) {
                        min = j;
                    }
                }

                swap(array, i, min);
            }

            printResult(array, "Selection sort");
        }

        // Bubble sort
        function onBubbleSortBtnClick() {
            var array = jsConsole.readNumbersArray("#array", " ");
            // TODO: check if array is empty

            var length = array.length;
            for (var i = 0; i < length; i++) {
                for (var j = 1; j < length - i; j++) {
                    if (array[j - 1] > array[j]) {
                        swap(array, j, j - 1);
                    }
                }
            }

            printResult(array, "Bubble sort");
        }

        // Insertion sort
        function onInsertionSortBtnClick() {
            var array = jsConsole.readNumbersArray("#array", " ");
            // TODO: check if array is empty

            var length = array.length;
            for (var i = 1; i < length; i++) {
                var j = i;
                while (j > 0 && array[j] < array[j - 1]) {
                    swap(array, j, j - 1);
                    j--;
                }
            }

            printResult(array, "Insertion sort");
        }

        function swap(array, a, b) {
            var temp = array[a];
            array[a] = array[b];
            array[b] = temp;
        }

        function printResult(array, sortName) {
            var table = "<table id=\"result\"><tr>";
            for (var i = 0; i < array.length; i++) {
                table += "<td>" + array[i] + "</td>";
            }
            table += "</tr></table>";
            jsConsole.writeLine(sortName + ": " + table);
        }
    </script>
</body>
</html>
